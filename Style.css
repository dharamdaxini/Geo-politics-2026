/* V89.2 UNIVERSAL CSS */
:root { 
    --bg-color: #000000; --card-bg: #121212; 
    --accent-gold: #ffcc00; --hint-blue: #4dabf7; --err-red: #ff4d4d;
    --font-ui: 'Outfit', sans-serif; 
    --font-serif: 'Libre Baskerville', serif; /* NEW for V89 */
    --font-code: 'JetBrains Mono', monospace; 
}

* { box-sizing: border-box; outline: none; -webkit-tap-highlight-color: transparent; }
body { 
    margin: 0; height: 100vh; background: var(--bg-color); color: #fff; 
    font-family: var(--font-ui); overflow: hidden; 
    touch-action: none; user-select: none; -webkit-user-select: none;
}

#header { width: 90%; margin: calc(20px + env(safe-area-inset-top)) auto 0; pointer-events: none; z-index: 10; position: relative; }
.header-meta { display: flex; justify-content: space-between; font-family: var(--font-code); font-size: 0.75rem; color: #666; margin-bottom: 8px; letter-spacing: 0.5px; }
.progress-track { width: 100%; height: 4px; background: #222; border-radius: 4px; }
#progress-bar { height: 100%; background: var(--accent-gold); width: 0%; transition: width 0.4s ease; box-shadow: 0 0 12px rgba(255, 204, 0, 0.4); }

#stack { position: relative; width: 90%; max-width: 400px; height: calc(100vh - 160px - env(safe-area-inset-top)); margin: 20px auto 0; perspective: 1200px; }

.card { 
    position: absolute; width: 100%; height: 100%; 
    background: var(--card-bg); border-radius: 24px; border: 1px solid #333; 
    display: flex; flex-direction: column; justify-content: center; align-items: center;
    transform-origin: center center; box-shadow: 0 25px 50px rgba(0,0,0,0.95); will-change: transform; 
    padding: 25px; touch-action: none;
}

.card-q { 
    font-family: var(--font-serif); /* Smart Typesetter Font */
    font-size: clamp(1.2rem, 4.5vw, 1.6rem); 
    line-height: 1.5; font-weight: 700; text-align: center; color: #e0e0e0;
    width: 100%; word-wrap: break-word; 
}

.swipe-label { 
    position: absolute; inset: 0; display: flex; flex-direction: column; align-items: center; justify-content: center; 
    background: rgba(0,0,0,0.96); font-family: var(--font-ui); font-weight: 900; font-size: 2rem; 
    text-transform: uppercase; border-radius: 24px; opacity: 0; pointer-events: none; z-index:100; letter-spacing: 2px; text-align:center; padding: 20px;
}
.sl-down-hint { 
    color: var(--hint-blue) !important; font-size: 1.4rem !important; text-transform: none !important; 
    font-family: var(--font-serif) !important; background: rgba(10, 10, 10, 0.98) !important; line-height: 1.6 !important;
}
.hint-icon { font-size: 3rem; margin-bottom: 15px; display: block; }

.menu-container { position: absolute; inset: 0; padding: 20px; pointer-events: none; }
.menu-center { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; width: 100%; }
.menu-opt { position: absolute; font-family: var(--font-ui); font-weight: 800; font-size: 0.85rem; letter-spacing: 1px; text-transform: uppercase; color: #666; transition: color 0.2s; }

.opt-top { top: 25px; left: 0; right: 0; text-align: center; color: var(--accent-gold); }
.opt-bottom { bottom: 25px; left: 0; right: 0; text-align: center; color: var(--hint-blue); }
.opt-left { top: 50%; left: 25px; transform: translateY(-50%); text-align: left; }
.opt-right { top: 50%; right: 25px; transform: translateY(-50%); text-align: right; }

#analysis-modal { position: absolute; inset: 0; background: #000; z-index: 2000; display: flex; flex-direction: column; opacity: 0; pointer-events: none; transition: opacity 0.3s ease; padding-top: env(safe-area-inset-top); }
#analysis-modal.active { opacity: 1; pointer-events: auto; }
.analysis-header { padding: 20px; text-align: center; border-bottom: 1px solid #333; font-family: var(--font-ui); color: var(--accent-gold); font-weight: 900; letter-spacing: 2px; }
.analysis-scroll { flex: 1; overflow-y: auto; padding: 20px; }
.mistake-card { background: #111; border: 1px solid #333; border-radius: 16px; padding: 20px; margin-bottom: 20px; }
.mistake-q { font-family: var(--font-serif); font-size: 1.1rem; color: #fff; margin-bottom: 10px; }
.mistake-ans { font-family: var(--font-code); font-size: 0.8rem; color: var(--err-red); margin-bottom: 10px; text-transform: uppercase; }
.mistake-exp { font-family: var(--font-serif); font-size: 0.95rem; color: #aaa; line-height: 1.5; border-top: 1px solid #222; padding-top: 10px; }

.input-name { width: 100%; padding: 18px; border-radius: 16px; border: 1px solid #444; background: #1a1a1a; color: #fff; font-family: var(--font-ui); font-size: 1.1rem; margin-bottom: 15px; text-align: center; outline: none; }
.input-name:focus { border-color: var(--accent-gold); }
.btn { width: 100%; padding: 20px; border-radius: 100px; border: none; background: #fff; color: #000; font-weight: 800; cursor: pointer; text-transform: uppercase; font-family: var(--font-ui); letter-spacing: 1px; margin-top: 10px; font-size: 0.9rem; }
.btn-save { background: var(--accent-gold); color: #000; box-shadow: 0 5px 20px rgba(255, 204, 0, 0.2); }
.btn-review { background: #333; color: #fff; border: 1px solid #555; }
.btn-close { background: transparent; color: #fff; border: 1px solid #333; margin: 20px; width: calc(100% - 40px); }

#loader { position: fixed; inset: 0; background: #000; z-index: 5000; display: flex; align-items: center; justify-content: center; font-family: var(--font-ui); font-weight: 900; font-size: 1.5rem; letter-spacing: 4px; color: var(--accent-gold); flex-direction: column; }
#data-source { margin-top: 10px; font-size: 0.7rem; font-family: var(--font-code); color: #444; }
